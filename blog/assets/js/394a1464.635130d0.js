"use strict";(self.webpackChunksmileysblog=self.webpackChunksmileysblog||[]).push([[287],{8642:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var t=i(4848),s=i(8453);const r={slug:"GDBinCygwin",title:"Using GDB to Debug C and C++",date:new Date("2024-09-21T00:00:00.000Z"),authors:"smiley",tags:["software"]},o=void 0,l={permalink:"/blog/posts/GDBinCygwin",editUrl:"https://github.com/b-smiley/b-smiley.github.io/blob/main/web-ui/src/pages/Blog/smileysblog/blog/2024-09-10-gdb-usage.md",source:"@site/blog/2024-09-10-gdb-usage.md",title:"Using GDB to Debug C and C++",description:"TLDR",date:"2024-09-21T00:00:00.000Z",tags:[{inline:!1,label:"Software Engineering",permalink:"/blog/posts/tags/software",description:"Software Engineering topics"}],readingTime:6.205,hasTruncateMarker:!1,authors:[{name:"Brendan Smiley",title:"Software Engineering Student @ University of Calgary",url:"https://brendansmiley.com",page:{permalink:"/blog/posts/authors/smiley"},socials:{github:"https://github.com/b-smiley",linkedin:"https://www.linkedin.com/in/brendan-s-9703ba193/"},imageURL:"https://github.com/b-smiley.png",key:"smiley"}],frontMatter:{slug:"GDBinCygwin",title:"Using GDB to Debug C and C++",date:"2024-09-21T00:00:00.000Z",authors:"smiley",tags:["software"]},unlisted:!1,prevItem:{title:"Useful Visual Studio Code Configurations",permalink:"/blog/posts/VSCodeConfigs"},nextItem:{title:"Docusaurus in React GH Pages",permalink:"/blog/posts/Adding Docusaurus Blog"}},d={authorsImageUrls:[void 0]},c=[{value:"TLDR",id:"tldr",level:2},{value:"Other Options",id:"other-options",level:2},{value:"Setting Up Cygwin",id:"setting-up-cygwin",level:2},{value:"The Cygwin Folder Structure",id:"the-cygwin-folder-structure",level:2},{value:"Getting Started with GDB",id:"getting-started-with-gdb",level:2},{value:"Useful commands",id:"useful-commands",level:2},{value:"Compile and Starting in GDB GUI",id:"compile-and-starting-in-gdb-gui",level:3},{value:"Using Auto Complete",id:"using-auto-complete",level:3},{value:"Running the application",id:"running-the-application",level:3},{value:"Use Previous Command",id:"use-previous-command",level:3},{value:"Refresh the GUI screen",id:"refresh-the-gui-screen",level:3},{value:"Next (Step Over)",id:"next-step-over",level:3},{value:"Step Into",id:"step-into",level:3},{value:"Continue",id:"continue",level:3},{value:"Exit/Quit GDB",id:"exitquit-gdb",level:3},{value:"Set a Breakpoint",id:"set-a-breakpoint",level:3},{value:"Changing Window Focus",id:"changing-window-focus",level:3},{value:"Printing",id:"printing",level:3},{value:"Segmentation Fault - Backtrace",id:"segmentation-fault---backtrace",level:3},{value:"References",id:"references",level:2}];function a(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"tldr",children:"TLDR"}),"\n",(0,t.jsx)(n.p,{children:"A beginner's guides to debugging C and C++ programs. The goal of this page is to be a reference to come back to when you want to debug with GDB.\nThe first few sections are more educational and provide a basic understanding of GDB and Cygwin. The later sections are more practical and provide a reference for using GDB in Cygwin."}),"\n",(0,t.jsx)(n.h2,{id:"other-options",children:"Other Options"}),"\n",(0,t.jsxs)(n.p,{children:["Since originally writing this, I have found that using Visual Studio Code with\nthe C/C++ extension is a ",(0,t.jsx)(n.em,{children:"much"})," better option for debugging C and C++ programs.\nHowever, in my ",(0,t.jsx)(n.em,{children:"opinion"}),", there is still a steeper learning curve to configuring C++\nin Visual Studio Code. A big reason it is harder to use for a beginner is because you have to understand how VsCode is configuring the debugger and how it is using GDB or LLDB under the hood."]}),"\n",(0,t.jsx)(n.p,{children:"You might opt for cygwin to get a more basic and native experience with\nC and C++ debugging. You will also understand the Visual Studio Code debugger better if you\nstart with GDB in Cygwin (VsCode uses GDB, LLDB, etc under the hood for C and C++ debugging)."}),"\n",(0,t.jsx)(n.h2,{id:"setting-up-cygwin",children:"Setting Up Cygwin"}),"\n",(0,t.jsxs)(n.p,{children:["What is Cygwin? ",(0,t.jsx)(n.a,{href:"https://www.cygwin.com/",children:"Cygwin"}),' is a Unix-like environment for Windows. It allows\ndevelopers to have access to a more Unix-like terminal and tools. I say\n"Unix-like" because it is not a full Unix system. Cygwin uses a DLL called\n',(0,t.jsx)(n.code,{children:"cygwin1.dll"})," to interact with Windows. To have a full Unix, Linux system on your Windows machine, see\n",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/windows/wsl/install",children:"WSL"})," or ",(0,t.jsx)(n.a,{href:"https://www.virtualbox.org/",children:"Virtual Machines"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["To set up Cygwin, you can follow the instructions on the ",(0,t.jsx)(n.a,{href:"https://www.cygwin.com/",children:"Cygwin\nwebsite"}),". The Cygwin installer is named ",(0,t.jsx)(n.code,{children:"setup-x86_64.exe"}),". There are different mirrors you can select\nfrom, they all should provide the packages being downloaded. Continue to the download page. On the download page, there are different buttons like filters and version selections you can use to\ncustomize your Cygwin install. If you rerun the installer (",(0,t.jsx)(n.code,{children:"setup-x86_64.exe"}),"), you can update your\ncustom install. You do not need to install everything (MASSIVE DOWNLOAD!). The recommended installs for this environment setup are the following:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Base Category:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All packages in the Base category (May be automatically selected)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Devel Category:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"gcc-core"}),"\n",(0,t.jsx)(n.li,{children:"gcc-g++"}),"\n",(0,t.jsx)(n.li,{children:"clang"}),"\n",(0,t.jsx)(n.li,{children:"gdb"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Debug Category:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"gdb-debuginfo"}),"\n",(0,t.jsx)(n.li,{children:"gdbm-debuginfo"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"nano"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Continue the install until it is complete. You can also install other packages,\nsuch as ",(0,t.jsx)(n.code,{children:"make"}),", ",(0,t.jsx)(n.a,{href:"https://cmake.org/",children:(0,t.jsx)(n.code,{children:"cmake"})}),", and ",(0,t.jsx)(n.a,{href:"https://git-scm.com/",children:(0,t.jsx)(n.code,{children:"git"})}),"\nif you want to level up your development environment."]}),"\n",(0,t.jsx)(n.h2,{id:"the-cygwin-folder-structure",children:"The Cygwin Folder Structure"}),"\n",(0,t.jsxs)(n.p,{children:["Just a quick note on the Cygwin folder structure. The Cygwin install will create a folder called ",(0,t.jsx)(n.code,{children:"C:\\cygwin64"}),". Cygwin will use its own folder structure outside of the Windows folder structure. If you want your project to exist within the Windows folder structure,\nuse ",(0,t.jsx)(n.code,{children:"cd C:// && ls"})," to get to the root of the C drive. To get back to the Cygwin user folder, use ",(0,t.jsx)(n.code,{children:"cd ~"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"getting-started-with-gdb",children:"Getting Started with GDB"}),"\n",(0,t.jsx)(n.p,{children:"This section will cover a basic step-by-step example of using GDB to debug a binary executable."}),"\n",(0,t.jsxs)(n.ol,{start:"0",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Validate installs: ",(0,t.jsx)(n.code,{children:"gdb --version"}),", ",(0,t.jsx)(n.code,{children:"gcc --version"}),", ",(0,t.jsx)(n.code,{children:"g++ --version"}),","]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create a simple C or C++ program to debug. For example, create a file with the following steps:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Create a file either with Notepad++ or with ",(0,t.jsx)(n.code,{children:"nano example.cpp"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Write and save a simple program in the file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <iostream>\n\nint main() {\n    int a = 5;\n    int b = 0;\n    std::cout << "Enter a number: ";\n    std::cin >> b;\n    std::cout << "The sum is: " << (a + b) << std::endl;\n    return 0;\n}\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Validate the file is saved by running ",(0,t.jsx)(n.code,{children:"cat example.cpp"})," to see the contents of the file."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"g++ -Wall -g -o example example.cpp"})," to compile the program. The ",(0,t.jsx)(n.code,{children:"-Wall"})," flag enables all warnings, and the ",(0,t.jsx)(n.code,{children:"-g"})," flag includes debugging information in the binary. ",(0,t.jsx)(n.code,{children:"-g"})," is required for GDB to work properly."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"ls"})," to see the compiled binary ",(0,t.jsx)(n.code,{children:"example"})," in the current directory."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["To run the program with GDB, use ",(0,t.jsx)(n.code,{children:"gdb ./example -tui"}),". The ",(0,t.jsx)(n.code,{children:"-tui"})," flag enables the text user interface for GDB, which is more user-friendly. You don't have to use ",(0,t.jsx)(n.code,{children:"-tui"}),", but I find it significantly easier to use and closer to a Visual Studio Code experience."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Press enter to start GDB. Once you see ",(0,t.jsx)(n.code,{children:"(gdb)"}),", you are in the GDB terminal. You can use gdb terminal commands to debug the program."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"r"})," to run the program. If you have not set any breakpoints, it will run to completion and exit. If you want to set a breakpoint, see the next step."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"b 4"})," to set a breakpoint at line 4 of the source code."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"r"})," to run the program again. This time, it will stop at the breakpoint you set."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"n"})," to step to the next line of code."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"print a"})," to print the value of ",(0,t.jsx)(n.code,{children:"a"}),". Definitely experiment with printing other types of variables and expressions. You can do pointer dereferencing, arithmetic, and more. This is extremely useful for memory management debugging. The print statement can do A LOT like math ",(0,t.jsx)(n.code,{children:"print a + 6"})," or ",(0,t.jsx)(n.code,{children:"print &a"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"n"})," until you enter a number. After you enter a number, it will look messy on the terminal. This happens when you use ",(0,t.jsx)(n.code,{children:"std::cin"})," or ",(0,t.jsx)(n.code,{children:"std::cout"}),". The terminal will show the output of the program, which can make it hard to read. You can clear the terminal with ",(0,t.jsx)(n.code,{children:"CTRL + L"})," to make it easier to read."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"c"})," to continue running the program until it exits or hits another breakpoint."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["That's it for the example! Now you can use the ",(0,t.jsx)(n.a,{href:"#useful-commands",children:"commands below"})," to debug the program. I will be adding to this section as I learn more about the GDB terminal."]}),"\n",(0,t.jsx)(n.h2,{id:"useful-commands",children:"Useful commands"}),"\n",(0,t.jsx)(n.p,{children:"How I use a minimal C and C++ setup and useful commands. This section is for reference only and therefore the explainations are minimal. You can always search for more information on the commands you are interested in."}),"\n",(0,t.jsx)(n.h3,{id:"compile-and-starting-in-gdb-gui",children:"Compile and Starting in GDB GUI"}),"\n",(0,t.jsxs)(n.p,{children:["For C: ",(0,t.jsx)(n.code,{children:"gcc -Wall -g -o <OutputName> <file1.c> <file2.c> && gdb ./<OutputName> -tui"})]}),"\n",(0,t.jsxs)(n.p,{children:["For C++: ",(0,t.jsx)(n.code,{children:"g++ -Wall -g -o <OutputName> <file1.c> <file2.c> && gdb ./<OutputName> -tui"})]}),"\n",(0,t.jsx)(n.h3,{id:"using-auto-complete",children:"Using Auto Complete"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"tab"})}),"\n",(0,t.jsx)(n.h3,{id:"running-the-application",children:"Running the application"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"press enter on GDB start"}),"\n",(0,t.jsx)(n.code,{children:"r"})," for run (make sure you have breakpoints set first or it will just run)\nYou can restart the program by calling ",(0,t.jsx)(n.code,{children:"r"})," again"]}),"\n",(0,t.jsx)(n.h3,{id:"use-previous-command",children:"Use Previous Command"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Enter"})," to run the previous command again"]}),"\n",(0,t.jsx)(n.h3,{id:"refresh-the-gui-screen",children:"Refresh the GUI screen"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"CTRL + L"})}),"\n",(0,t.jsx)(n.h3,{id:"next-step-over",children:"Next (Step Over)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-into",children:"Step Into"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"s"})}),"\n",(0,t.jsx)(n.h3,{id:"continue",children:"Continue"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"c"})}),"\n",(0,t.jsx)(n.h3,{id:"exitquit-gdb",children:"Exit/Quit GDB"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"q"})}),"\n",(0,t.jsx)(n.h3,{id:"set-a-breakpoint",children:"Set a Breakpoint"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"b <classname>::<methodname>"})," or ",(0,t.jsx)(n.code,{children:"b <linenumber>"})," or ",(0,t.jsx)(n.code,{children:"b <functionName>"})]}),"\n",(0,t.jsx)(n.h3,{id:"changing-window-focus",children:"Changing Window Focus"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"focus cmd"})," for repeating commands (can use mouse scroll to move source code in this mode)\n",(0,t.jsx)(n.code,{children:"focus src"})," to move the displayed source code window (can use arrow keys to move source code in this mode)"]}),"\n",(0,t.jsx)(n.h3,{id:"printing",children:"Printing"}),"\n",(0,t.jsxs)(n.p,{children:["can use ",(0,t.jsx)(n.code,{children:"print(<variable>)"})," for a quick check\ncan use ",(0,t.jsx)(n.code,{children:'printf("<regular c string formatter here>");'})," for a more complex check"]}),"\n",(0,t.jsxs)(n.p,{children:["Example:\n",(0,t.jsx)(n.code,{children:"print this->idM"}),"\n",(0,t.jsx)(n.code,{children:"print &this"}),"\n",(0,t.jsx)(n.code,{children:"print a + 6"})]}),"\n",(0,t.jsx)(n.h3,{id:"segmentation-fault---backtrace",children:"Segmentation Fault - Backtrace"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"bt"})," or ",(0,t.jsx)(n.code,{children:"backtrace"})]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsx)(n.p,{children:"Below are some additional references that I found useful learning GDB. Definitely check them out to learn much more!"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.cygwin.com/",children:"Cygwin Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.oreilly.com/library/view/c-in-a/9781491924174/",children:"C in a Nutshell by Peter Prinz & Tony Crawford. Oreilly. Chapter 21: Debugging C Programs with GDB"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_19.html",children:"Old GNU Manual"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var t=i(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);